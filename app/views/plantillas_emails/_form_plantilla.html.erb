<%= form_tag({ controller: "plantillas_emails", action: "update", id: @plantillas_email.id }, {:class=> "form-horizontal", :method => :post, remote: true}) do %>
  <div class="row">
    <div class="col-md-9 col-sm-9 col-xs-12">

      <%= label_tag :asunto_email, "Asunto: ", class:"control-label col-md-2 col-sm-2 col-xs-12", style:"text-align:right;"%>
      <div class="input-group col-md-10 col-sm-10 col-xs-12">
        <!--span class="input-group-addon"><i class="fa fa-pencil"> </i></span-->
        <!-- f.text_field :asunto_email, class:'form-control text_field'-->
           <%= text_area_tag :asunto_email, @plantillas_email.asunto_email,{class:'form-control text_field',id:"summernote_asunto" }%>
        <!--f.text_area :asunto_email, class:'form-control text_field', id:"summernote_asunto"%-->
      </div>
    </div>
    <div class="col-md-2 col-sm-2 col-xs-12">
    </div>
  </div>
  <div class="row">
    <div class="col-md-9 col-sm-9 col-xs-12">
        <%= label_tag :msg_email, "Su mensaje: ", class:"control-label col-md-2 col-sm-2 col-xs-12",  style:"text-align:right;"%>
      <div class="input-group col-md-10 col-sm-10 col-xs-12">
         <!--textarea id="summernote" name="summernote"></textarea-->
        <%= text_area_tag :summernote, @plantillas_email.msg_email , {class:'form-control text_field', id: "summernote"}%>
      </div>
  </div>
  <div class="col-md-3 col-sm-3 col-xs-12" style="color:black;  font-weight: normal; text-align: justify; font-size: 12px;">
    <p>
        El texto que aparece dentro de dobles corchetes no debe de ser modificado porque será reemplazado automáticamente por el sistema con los datos reales de las operaciones.
    </p>
    <p> Por esa razón <b>{{Nombre del cliente}}</b> será reemplazado por <b>"Fulano Martínez"</b>, suponiendo que ese es el nombre de la persona a quien fue expedida la factura.</p>
  </div>

  </div>
  <div class="actions" align="center">
    <input class="btn btn-default" value="Cancelar" type="reset">
    <%= submit_tag "Guardar Cambios", :class=>"btn btn-success active" %>
  </div>
<% end %>

<script type="text/javascript">
  
<% if @plantillas_email.comprobante == "fv" %>

    /*Editor de texto para los asuntos de las plantillas de email solo permite poner texto variable sin aplicar formato al texto*/
    $('#summernote_asunto').summernote({
        tabsize: 2,
        minHeight: 40,
        maxHeight: 40,
        maxWidth: 200,
        lang: 'es-ES', // default: 'en-US'
        toolbar: false,
        //Se aprovecha la funcionalidad de las sugerencias de summernote para brindarle al usuario la opcion de agregar texto variable.
        hint: {
          mentions: ['Nombre del cliente',
                     'Fecha de la factura','Número de factura','Folio de la factura','Total de la factura','Nombre del negocio','Nombre de la sucursal','Email de contacto','Teléfono de contacto'],
          match: /\B@(\w*)$/,
          search: function (keyword, callback) {
            callback($.grep(this.mentions, function (item) {
              return item.indexOf(keyword) == 0;
            }));
          },
          content: function (item) {
            return '{{' + item + '}}';
          }
        },
    });

      $('#summernote').summernote({
        tabsize: 2,
        minHeight: 170,
        maxHeight: 170,
        maxWidth: 200,
        lang: 'es-ES', // default: 'en-US'
        //Se aprovecha la funcionalidad de las sugerencias de summernote para brindarle al usuario la opcion de agregar texto variable.
        hint: {
          mentions: ['Nombre del cliente',
                     'Fecha de la factura','Número de factura','Folio de la factura','Total de la factura','Nombre del negocio','Nombre de la sucursal','Email de contacto','Teléfono de contacto'],
          match: /\B@(\w*)$/,
          search: function (keyword, callback) {
            callback($.grep(this.mentions, function (item) {
              return item.indexOf(keyword) == 0;
            }));
          },
          content: function (item) {
            return '{{' + item + '}}';
          }
        },

        toolbar: [
        // [groupName, [list of button]]
        ['fontname',['fontname']],
        ['fontsize', ['fontsize']],
        ['style', ['bold', 'italic', 'underline', 'clear']],
        ['font', ['strikethrough', 'superscript', 'subscript']],
        ['color', ['color']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['height', ['height']],
        ['insert',['link','table','hr']],
        ['misc',['undo','redo']]

      ]
    });

  <% elsif @plantillas_email.comprobante == "ac_fv" %>

    /*Editor de texto para los asuntos de las plantillas de email solo permite poner texto variable sin aplicar formato al texto*/
    $('#summernote_asunto').summernote({
        tabsize: 2,
        minHeight: 40,
        maxHeight: 40,
        maxWidth: 200,
        lang: 'es-ES', // default: 'en-US'
        toolbar: false,
        //Se aprovecha la funcionalidad de las sugerencias de summernote para brindarle al usuario la opcion de agregar texto variable.
        hint: {
          mentions: ['Nombre del cliente', 'Fecha de cancelación',
                     'Fecha de la factura','Número de factura','Folio de la factura','Total de la factura','Nombre del negocio','Nombre de la sucursal','Email de contacto','Teléfono de contacto'],
          match: /\B@(\w*)$/,
          search: function (keyword, callback) {
            callback($.grep(this.mentions, function (item) {
              return item.indexOf(keyword) == 0;
            }));
          },
          content: function (item) {
            return '{{' + item + '}}';
          }
        },
    });

      $('#summernote').summernote({
        tabsize: 2,
        minHeight: 170,
        maxHeight: 170,
        maxWidth: 200,
        lang: 'es-ES', // default: 'en-US'
        //Se aprovecha la funcionalidad de las sugerencias de summernote para brindarle al usuario la opcion de agregar texto variable.
        hint: {
          mentions: ['Nombre del cliente', 'Fecha de cancelación',
                     'Fecha de la factura','Número de factura','Folio de la factura','Total de la factura','Nombre del negocio','Nombre de la sucursal','Email de contacto','Teléfono de contacto'],
          match: /\B@(\w*)$/,
          search: function (keyword, callback) {
            callback($.grep(this.mentions, function (item) {
              return item.indexOf(keyword) == 0;
            }));
          },
          content: function (item) {
            return '{{' + item + '}}';
          }
        },

        toolbar: [
        // [groupName, [list of button]]
        ['fontname',['fontname']],
        ['fontsize', ['fontsize']],
        ['style', ['bold', 'italic', 'underline', 'clear']],
        ['font', ['strikethrough', 'superscript', 'subscript']],
        ['color', ['color']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['height', ['height']],
        ['insert',['link','table','hr']],
        ['misc',['undo','redo']]

      ]
    });

<% elsif @plantillas_email.comprobante == "nc" || @plantillas_email.comprobante == "ac_nc" %>
 
    $('#summernote_asunto').summernote({
        tabsize: 2,
        height: 170,
        minHeight: 40,
        maxHeight: 40,
        maxWidth: 200,
        lang: 'es-ES', // default: 'en-US'
        //Se aprovecha la funcionalidad de las sugerencias de summernote para brindarle al usuario la opcion de agregar texto variable.
        toolbar:false,
        hint: {
          //Para las notas de crédito no hacen falta los datos de la venta, pero si resulta util los datos de la factura asociada.
          mentions: ['Nombre del cliente','Fecha de la nota de crédito','Número de la nota de crédito','Folio de la nota de crédito', 'Total de la nota de crédito' ,'Fecha de la factura','Número de factura','Folio de la factura','Total de la factura','Nombre del negocio','Nombre de la sucursal','Email de contacto','Teléfono de contacto'],
          match: /\B@(\w*)$/,
          search: function (keyword, callback) {
            callback($.grep(this.mentions, function (item) {
              return item.indexOf(keyword) == 0;
            }));
          },
          content: function (item) {
            return '{{' + item + '}}';
          }
        },
    });
      $('#summernote').summernote({
        tabsize: 2,
        height: 170,
        minHeight: 170,
        maxHeight: 170,
        maxWidth: 200,
        lang: 'es-ES', // default: 'en-US'
        //Se aprovecha la funcionalidad de las sugerencias de summernote para brindarle al usuario la opcion de agregar texto variable.
        hint: {
          //Para las notas de crédito no hacen falta los datos de la venta, pero si resulta util los datos de la factura asociada.
          mentions: ['Nombre del cliente','Fecha de la nota de crédito','Número de la nota de crédito','Folio de la nota de crédito', 'Total de la nota de crédito' ,'Fecha de la factura','Número de factura','Folio de la factura','Total de la factura','Nombre del negocio','Nombre de la sucursal','Email de contacto','Teléfono de contacto'],
          match: /\B@(\w*)$/,
          search: function (keyword, callback) {
            callback($.grep(this.mentions, function (item) {
              return item.indexOf(keyword) == 0;
            }));
          },
          content: function (item) {
            return '{{' + item + '}}';
          }
        },

        toolbar: [
        // [groupName, [list of button]]
        ['fontname',['fontname']],
        ['fontsize', ['fontsize']],
        ['style', ['bold', 'italic', 'underline', 'clear']],
        ['font', ['strikethrough', 'superscript', 'subscript']],
        ['color', ['color']],
        ['para', ['ul', 'ol', 'paragraph']],
        ['height', ['height']],
        ['insert',['link','table','hr']],
        ['misc',['undo','redo']]

      ]
    });
<% end %>
</script>